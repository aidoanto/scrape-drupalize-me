---
title: "What Are Render Arrays?"
url: "https://drupalize.me/tutorial/what-are-render-arrays?p=2775"
guide: "[[output-and-format-data-code]]"
order: 2
---

# What Are Render Arrays?

## Content

The core structure of Drupal's Render API is the render array, which is a hierarchical associative array containing data to be rendered and properties describing how the data should be rendered. As a module developer you'll use render arrays to describe the content your module controls in order to output it on a page as HTML, or as part of a response in another format like JSON. As a theme developer, you'll manipulate render arrays in order to affect the way content is output on the page.

In this tutorial we'll learn:

- What render arrays are and why they exist
- The basic format of a render array
- What "properties" and "elements" signify in the context of a render array
- Where to find more information about how to create a render array to describe your own content

By the end of this tutorial you should be able to understand when you need to use a render array, recognize one when you see it, and know where to get more detailed information about render array formatting specifics.

## Goal

Explain the concept of render arrays and how they relate to Drupal's Render API.

## Prerequisites

- [Render API Overview](https://drupalize.me/tutorial/render-api-overview)
- A solid understanding of [how associative arrays work in PHP](https://drupalize.me/videos/php-arrays-and-loops) is required to start working with render arrays in your code

Sprout Video

## What are render arrays?

The core structure of the Render API is the render array, which is a hierarchical associative array containing data to be rendered and properties describing how the data should be rendered. Each level in the hierarchy represents an individual unit of data, each of which can have any number of children.

Think of a render array as a unit of content that you want to output. Each element in the array is defined as being of a specific type. This informs what kind of content elements contain, as well as the properties that can be used to describe that content.

Renderable arrays have two kinds of key/value pairs: properties and child elements.

**Properties** have keys starting with `#` and their values influence how the array will be translated to a string.

**Elements** are all keys whose name does not start with a `#`. Their values should be renderable arrays themselves, which will be rendered during the rendering of the parent array. The markup provided by the children is typically inserted into the markup generated by the parent array.

**Note:** The term "element" is also often used as shorthand for *render element type*, which we discuss in more detail in the [What Are Render Elements](https://drupalize.me/tutorial/what-are-render-elements) tutorial.

Image

![Diagram showing example render array with nested sets of elements and properties. Highlights that elements are themselves arrays which contain a set of properties and optional child elements.](../assets/images/render-array-diagram.png)

For example, you might have an array that represents the content of a block which contains a title and some copy. The title might be a markup element that contains a string with an `<h2>` tag. The copy might contain a child element that is an unordered list, which itself contains child elements for each of the list items which are links, followed by a second element which is a five-star voting widget.

The structure of a render array is somewhat analogous to the HTML DOM.

```
|- page
    |- header
        |- block (navigation)
           |- menu
              |- menu item 1
                 |- #item url
                 |- item text
              |- menu item 2
    |- content
        |- block
            |- article
                |- image field
                   |- #image source file
                   |- #image alt text
                   |- #image title
                |- body
                   |- #body content
                   |- #body content format
            |- article
            |- article
    |- footer
         |- block (copyright)
            |- #block content
            |- #block content format
```

[Renderers](https://drupalize.me/tutorial/render-api-renderers) are used to transform the structured data in a render array into HTML markup (or other formats), starting from the innermost child and working outwards.

Image

![Screenshot of array code, converted to html, and resulting output](../assets/images/render-api-array-example.png)

In this example image you can see the following:

1. A renderable array that defines an image to display. There's a lot there, but if you look closely you'll see things like the content of the `alt` attribute, and an indicator as to which image style to use when formatting the image
2. The HTML produced after rendering the array
3. What the final output looks like in a browser

## Why arrays?

The Render APIs use of arrays has some distinct advantages over strings of text, including:

- PHP has many powerful utilities for manipulating arrays, and in many cases they are easier to use than manipulating strings with find/replace or regular expressions.
- Data is passed from layer to layer within Drupal as render arrays, which are much easier to manipulate than complete strings of already formatted text. This allows data to be easily accessed and altered.
- The render arrays provide one consistent system for describing output used by all code that generates output.
- Better re-usability, since code that generates a renderable array can be invoked and calling code can use just the parts of the array that are required for their use case.
- When the content is defined as metadata instead of in its final format we can use different renderers to output the content in a different format without requiring every module to provide content in every format we might want to support in the future.

## Properties

Properties determine how each individual instance of an element will ultimately be rendered. In effect, they are settings for the renderer, like, include this CSS file, do print the title, do not print the prefix, etc. The properties available for any element in a render array are determined by whether it is a `#type`, `#theme`, or `#markup` element. They are further defined for `#type` and `#theme` elements based on the value specified for the `#type` or `#theme` property. Finally, a set of global properties are available for all elements.

### `#type`, `#theme`, and `#markup`

Almost every Render API element at any level of the render array's hierarchy will have one of these properties defined. These properties are important because they dictate much of how the rest of the properties for this element are used. Thus, knowing which is being used will make it easier to read the rest of the array.

When evaluating a Render API array look for these properties first in order to understand how the other properties are being used.

### `#plain_text`

Specifies that the array provides text that needs to be escaped.

Example:

```
'#plain_text' => t('Hello world!')
```

### `#markup`

Specifies that the array provides HTML markup directly. `#plain_text` works the same way as `#markup`, but content is assumed to be plain-text safe, and does not contain HTML markup. Unless the markup is very simple, such as an explanation in a paragraph tag, it is normally preferable to use `#theme` or `#type` instead, so that a theme can customize the markup.

Example:

```
'#markup' => '<p>' . t('Hello world!') .'</p>'
```

### `#theme`

Specifies that the array contains data to be passed to a specific theme hook, normally a Twig template file, and the properties are generally passed as variables to the template. Values for `#theme` are defined by modules using implementations of `hook_theme()`.

Example:

```
'#theme' => 'node'
```

### `#type`

Specifies that the array contains data and options for a particular type of "render element", the additional properties available, and how they are used to render the element to HTML.

Example:

```
'#type' => 'textfield'
```

The definitions above are from the [Drupal API documentation on render arrays](https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Render%21theme.api.php/group/theme_render/).

## Common properties

Here are the common properties used during the rendering of all render elements. List taken from the [documentation for `\Drupal\Core\Render\Element\RenderElementBase`](https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Render%21Element%21RenderElementBase.php/class/RenderElementBase/)

| type | description |
| --- | --- |
| #access | (bool) Whether the element is accessible or not. When FALSE, the element is not rendered and user-submitted values are not taken into consideration. |
| #access\_callback | Callback to check access. Argument: element. |
| #allowed\_tags | (array) Array of allowed HTML tags for XSS filtering of #markup, #prefix, #suffix, etc. |
| #attached | (array) Array of attachments associated with the element. See the "Attaching libraries in render arrays" section of the Render API topic for an overview, and [AttachmentsResponseProcessorInterface::processAttachments](https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Render%21AttachmentsResponseProcessorInterface.php/function/AttachmentsResponseProcessorInterface%3A%3AprocessAttachments/) for a list of what this can contain. Besides this list, it may also contain a `placeholders` element; see the *placeholders* section of the Render API topic for an overview. |
| #attributes | (array) HTML attributes for the element. The first-level keys are the attribute names, such as `class`, and the attributes are usually given as an array of string values to apply to that attribute (the rendering system will concatenate them into a string in the HTML output). |
| #cache | (array) Cache information. See the Caching section of the Render API topic for more information. |
| #children | (array, internal) Array of child elements of this element. Set and used during the rendering process. |
| #create\_placeholder | (bool) TRUE if the element has placeholders that are generated by #lazy\_builder callbacks. Set internally during rendering in some cases. See also #attached. |
| #defaults\_loaded | (bool) Set to TRUE during rendering when the defaults for the element #type have been added to the element. |
| #id | (string) The HTML ID on the element. This is automatically set for form elements, but not for all render elements; you can override the default value or add an ID by setting this property. |
| #lazy\_builder | (array) Array whose first element is a [lazy building callback](https://drupalize.me/tutorial/use-lazy-builders-and-placeholders) (callable), and whose second is an array of scalar arguments to the callback. To use lazy building, the element array must be very simple: no properties except #lazy\_builder, #cache, #weight, and #create\_placeholder, and no children. A lazy builder callback typically generates #markup and/or placeholders; see the *placeholders* section of the Render API topic for information about placeholders. |
| #markup | (string) During rendering, this will be set to the HTML markup output. It can also be set on input as a fallback, if there is no theming for the element. This will be filtered for XSS problems during rendering; see also #plain\_text and #allowed\_tags. |
| #plain\_text | (string) Elements can set this instead of #markup. All HTML tags will be escaped in this text, and if both #plain\_text and #markup are provided, #plain\_text is used. |
| #post\_render | (array) Array of callables or function names, which are called after the element is rendered. Arguments: rendered element string, children. |
| #pre\_render | (array) Array of callables or function names, which are called just before the element is rendered. Argument: $element. Return value: an altered $element. |
| #prefix | (string) Text to render before the entire element output. See also #suffix. If it is not already wrapped in a safe markup object, will be filtered for XSS safety. |
| #printed | (bool, internal) Set to TRUE when an element and its children have been rendered. |
| #render\_children | (bool, internal) Set to FALSE by the rendering process if the #theme call should be bypassed (normally, the theme is used to render the children). Set to TRUE by the rendering process if the children should be rendered by rendering each one separately and concatenating. |
| #suffix | (string) Text to render after the entire element output. See also #prefix. If it is not already wrapped in a safe markup object, will be filtered for XSS safety. |
| #theme | (string) Name of the theme hook to use to render the element. A default is generally set for elements; users of the element can override this (typically by adding `__suggestion` suffixes). |
| #theme\_wrappers | (array) Array of theme hooks, which are invoked after the element and children are rendered, and before #post\_render functions. |
| #type | (string) The machine name of the type of render/form element. |
| #weight | (float) The sort order for rendering, with lower numbers coming before higher numbers. Default if not provided is zero; elements with the same weight are rendered in the order they appear in the render array. |

Learn more about callback properties in [Render API Callback Properties](https://drupalize.me/tutorial/render-api-callback-properties).

## What other properties are available?

In addition to the above properties common to all render elements, individual elements can have additional properties depending on how they are defined.

Figuring out what properties are valid for a render element requires first determining whether it is a `#markup`, `#plain_text`, `#type`, or a `#theme` element, and then looking up the valid properties based on that.

`#plain_text` and `#markup` elements use only the common properties from above.

For `#type` elements, the value of the `#type` key is also the name of the element type. Additional properties are documented in the docblock for the class defining the element type.

Example:

```
$output = array(
  '#type' => 'link',
  '#title' => 'About',
  '#url' => 'about',
);
```

In this case, the element type is *link*. Using that information we can look up documentation about link elements here: [Form and render elements](https://api.drupal.org/api/drupal/elements/9) (api.drupal.org). **Note**: There is a problem with api.drupal.org listing the elements. Navigate to a different branch, such as version 9, to see a more complete list of form and render elements.

We now know that link elements are rendered using the `Drupal\Core\Render\Element\Link` class, and the documentation for that class will outline any properties that are specific to link elements. You'll also need to view the documentation for any parent classes, `Drupal\Core\Render\Element\RenderElementBase` in this case, as an element can use any of the valid properties from a parent render element as well.

**Note:** When discussing Render API element types it is common to abbreviate, so instead of writing `'#type' => 'markup'`, or `'#type' => 'textfield'`, you'll often see `#markup` or `#textfield` used both in the official documentation and on this site as shorthand.

For `#theme` elements, the value of the `#theme` key is the [theme hook](https://drupalize.me/tutorial/what-are-template-files) used to determine the template file used to provide the HTML representation of the data. Modules define theme hooks by implementing `hook_theme()`; this determines the name of the Twig template file that will be used as well as any variables that will be passed to the template file. If the `hook_theme()` implementation defines a new variable 'first\_name', then in a render array you would provide this data using the property `#first_name`.

So in order to know what properties exist for a `#theme` element, you'll need to locate the implementation of `hook_theme()` where that theme hook is defined, and take a look at the information provided. Let's look at an example. This is taken from `drupal_common_theme()`, and is the definition that corresponds with `'#theme' => 'item_list'` render elements.

```
'item_list' => array(
  'variables' => array(
    'items' => array(),
    'title' => '',
    'list_type' => 'ul',
    'wrapper_attributes' => array(),
    'attributes' => array(),
    'empty' => NULL,
    'context' => array()
  ),
),
```

The key of the array, `'item_list'` is what determines the value use for the `#theme` property in a render array. It's also the [base name of the Twig template file](https://drupalize.me/tutorial/what-are-template-files) that is used to render the data as HTML. Each of the keys listed under the `'variables'` array are the names of variables used in the template. These correspond with the #properties used when rendering a `'#theme' => 'item_list'` element in an array. You can also see what the default value for the property will be if left blank in the render array.

This shows what a render array element that will be themed as an *item\_list* might look like:

```
$list = array(
  '#theme' = 'item_list',
  '#title' => Drupal::t('A list of items'),
  '#items' => array(
    array('value' => Drupal::t('Item one')),
    array('value' => Drupal::t('Item two'), 'attributes' => array('class' => 'blue')),
  ),
  '#attributes' => array('class' => array('my-item-list')),
);
```

Remember to look at the `hook_theme()` implementation, corresponding Twig template files, and any preprocess function when researching any of the values that can be used with `#theme` style render arrays.

Another way to find this information is to look at the comments at the top of the corresponding Twig template file. So again, assuming `'#theme' => 'item_list'` we can look for an *item-list.html.twig* file in Drupal core. In this case the comments for the file are as follows, and you can see the same properties as listed above.

```
{#
/**
 * @file
 * Default theme implementation for an item list.
 *
 * Available variables:
 * - items: A list of items. Each item contains:
 *   - attributes: HTML attributes to be applied to each list item.
 *   - value: The content of the list element.
 * - title: The title of the list.
 * - list_type: The tag for list element ("ul" or "ol").
 * - wrapper_attributes: HTML attributes to be applied to the list wrapper.
 * - attributes: HTML attributes to be applied to the list.
 * - empty: A message to display when there are no items. Allowed value is a
 *   string or render array.
 * - context: A list of contextual data associated with the list. May contain:
 *   - list_style: The custom list style.
 *
 * @see template_preprocess_item_list()
 *
 * @ingroup themeable
 */
#}
```

Another common place to find good documentation, and examples, of properties being used is preprocess functions associated with the template used for an element. For example, the `template_preprocess_table()` function's documentation has some good examples of creating tables via a render array.

## Common values for `#theme`

Some of the most commonly used `#theme` values and their variables/properties are:

- item\_list
  - (array) items
  - (string) title
  - (string) list\_type `ul` or `ol`
- link
  - (string) title
  - (string) URL, or internal path
- links
  - (array) links
- table
  - (string) header
  - (array) rows
  - (array) colgroups
  - (boolean) sticky
  - (boolean) responsive
  - (string) empty
- time
  - (int) timestamp
  - (string) text

You can also use [theme hook suggestions](https://drupalize.me/tutorial/discover-existing-theme-hook-suggestions) by setting the `#theme` property to an array.

Example:

```
$element = array(
  '#theme' => array(
    'node__custom_suggestion', // node--custom-suggestion.html.twig
    'node__teaser' // node--teaser.html.twig
    'node' // node.html.twig
  ),
);
```

## Recap

In this tutorial we defined a render array as a hierarchical associative array consisting of properties denoted by key names that start with a `#` which describe the content to be rendered, and child elements that are themselves render arrays. We looked at how to determine which properties can be used when defining content, and talked about the reasons that render arrays are used to describe content instead of strings.

## Further your understanding

- What is a property, and what is an element? How can you distinguish between the two?
- Why does the Render API use structured arrays?
- Explain how to figure out what properties can be used with a Render API array element with a `#theme` property.

## Additional resources

- [Render Arrays](https://www.drupal.org/docs/drupal-apis/render-api/render-arrays) (Drupal.org)
- [A code-level Render API overview](https://api.drupal.org/api/drupal/core!lib!Drupal!Core!Render!theme.api.php/group/theme_render/) (api.drupal.org)

Follow along with these examples to practice defining content using renderable arrays:

- [Output Plain Text and Simple HTML Markup](https://drupalize.me/tutorial/output-plain-text-and-simple-html-markup)
- [Output Content with a Template File](https://drupalize.me/tutorial/output-content-template-file)
- [Output a List of Items](https://drupalize.me/tutorial/output-list-items)
- [Use #prefix and #suffix Properties to Wrap an Element](https://drupalize.me/tutorial/use-prefix-and-suffix-properties-wrap-element)
- [Output a Table](https://drupalize.me/tutorial/output-table)
- Add CSS or JavaScript to elements in a render array by [defining an asset library](https://drupalize.me/tutorial/define-asset-library), and then [attaching an asset library](https://drupalize.me/tutorial/attach-asset-library) using the common `#attached` property
- [Add Cache Metadata to Render Arrays](https://drupalize.me/tutorial/add-cache-metadata-render-arrays)
- [Use Lazy Builders and Placeholders](https://drupalize.me/tutorial/use-lazy-builders-and-placeholders) for highly dynamic content

Was this helpful?

Yes

No

Any additional feedback?

Previous
[Render API Overview](/tutorial/render-api-overview?p=2775)

Next
[What Are Render Elements?](/tutorial/what-are-render-elements?p=2775)

Clear History

Ask Drupalize.Me AI

close