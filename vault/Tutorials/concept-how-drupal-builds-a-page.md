---
title: "Concept: How Drupal Builds a Page"
url: "https://drupalize.me/tutorial/concept-how-drupal-builds-page?p=3234"
guide: "[[drupal-module-developer-guide]]"
---

# Concept: How Drupal Builds a Page

## Content

One of the primary ways that modules extend Drupal is by adding dynamic pages with content generated by application-specific logic. This tutorial looks at Drupal's process of handling a user's request and transforming it into a complete web page. We'll answer questions like:

- How does Drupal use Symfony's HttpKernel to process requests?
- How do user-configured blocks and the theme layer contribute to the page's content and appearance?
- What is the role of routes, controllers, and responses in this process?

In this tutorial, we'll:

- Follow the journey of a user request from URL to an HTML response in Drupal.
- Define the role of routes, controllers, and responses in Drupal's request handling.
- See how blocks and the theme layer contribute to the final output of a Drupal page.

By the end of this tutorial, you should be able to describe Drupal's request flow, understand the interaction of its key components in building a page, and appreciate the modular architecture that drives Drupal's flexibility.

## Goal

Explain how Drupal handles processing an incoming request for a URL and turns it into a response, emphasizing the role of routes and controllers.

## Prerequisites

- None

## How pages are created

Every web framework, including Drupal, has the same job: provide a way for developers to map URLs to the code that builds the page. *Routes*, *controllers*, and *responses* are what module developers use to create the primary content for pages at custom URLs in a Drupal site. *Blocks* are how administrators configure what else appears on the page. And the *theme* determines what everything looks like.

Drupal's request-to-response workflow is a sequence of well-defined steps, orchestrated primarily by the Symfony HttpKernel component, which Drupal extends for its specific needs. As a module developer, you don't need to understand all the details. If you want to add a new URL and map it to a controller, it's enough to implement the pattern and trust that it will work. But when you have a mental model of what Drupal is doing behind the scenes, you will have a better understanding of the pattern you are using.

## Key terms

Here are the terms we'll use to describe components in the request-to-response workflow in Drupal.

### Route

A route is the configuration that declares the existence of a path (or URL) and tells the system which code to call to generate the content for that path. Routes can also provide configuration for access control and how to handle passing parameters from the path to the controller. Think of routes like a city map in Drupal. Each route is a path to a destination, guiding the system to the right controller based on the URL, just as a map guides you to different locations in a city.

### Controller

A controller is a PHP class that serves as the callback for a route. When a route is matched to a request, the corresponding controller is executed and is responsible for generating the content for the page. Imagine a controller as the brain of the page creation process. For instance, when a user requests a page listing blog posts, the controller queries the database for recent posts and prepares them for display. This logic is encapsulated within the controller, making it a central part of generating page-specific content.

### Response

After the controller has executed its logic, it generates a `Response` object containing the primary content you want displayed on the page. A response is like a package sent to the HttpKernel. The controller packs it with the right content, for example, HTML, JSON, or a status message. Once ready, this package is delivered to be opened and displayed by the browser.

### Blocks

Blocks in Drupal are the building blocks of a page. They represent discrete chunks of content or functionality, such as menus, lists of content, or user login forms. Module developers can create custom blocks using the plugin system. Administrators place blocks into regions of a page as defined by the theme. For instance, a "Recent posts" block might be placed in the sidebar region of a blog page.

### Theme

The theme layer in Drupal acts like an interior decorator, determining the look and feel of the page. It uses Twig templates and CSS stylesheets to lay out the blocks and content in an aesthetically pleasing and functional manner. The theme layer decides how elements are styled and where they are positioned on the page, much like how an interior decorator would choose paint colors and arrange furniture in a room.

## Understanding the request flow

At a high level, here are the steps that Drupal goes through when generating the content of a page.

### Request processing

- **Incoming request**: It starts with a user entering a URL into their browser and pressing *Enter*. The HTTP request hits Drupal's `index.php`, bootstrapping the HttpKernel.
- **Request object creation**: The HttpKernel creates a `Request` object that defines details like headers, URL path, and any query string arguments in a consistent way.
- **Kernel events**: The HttpKernel dispatches several events. These events allow Drupal to integrate its routing, authentication, error handling, and more. Drupal effectively decorates the `Request` with additional details like the current user's information.

### Request resolution and routing

- **Routing**: Drupal's routing system, built on Symfony's Routing component, matches the URL to a defined route using a best-fit matching algorithm.
- **Controller identification**: The matched route determines which controller handles the request, and Drupal calls the defined controller, leading to the generation of a response.

### Controller execution

- **Controller logic**: Controllers, usually defined as methods on a class, execute the business logic for the page.
- **Response generation**: Controllers return a response, which can be a renderable array or a `Symfony\Component\HttpFoundation\Response` object.

### Response delivery

- **Theming and final output**: Drupal wraps the controller's output with necessary site elements (like the blocks you placed into all the regions for the page), and applies styles and layout defined by the current theme.
- **Delivery to browser**: The HttpKernel finalizes and sends the response back to the user's browser.

## Recap

In this tutorial, we explained at a high level the request-to-response workflow, which Drupal uses to generate all the content for a page at a particular path. We defined the following key terms in the context of the page-generation workflow: route, controller, response, blocks, and theme. You should now have enough of a mental picture about this process to be able to start digging into the details, which we'll do throughout this guide.

## Further your understanding

- Can you explain in plain English the process that Drupal goes through when creating a page?
- What role do routes and controllers play in customizing Drupal's behavior?
- How does Drupal use Symfony's HttpKernel component?

## Additional resources

- [Overview: Routes, Controllers, and Responses](https://drupalize.me/tutorial/overview-routes-controllers-and-responses) (Drupalize.Me)
- [Routing system overview](https://www.drupal.org/docs/drupal-apis/routing-system/routing-system-overview) (Drupal.org)
- [Symfony Routing component documentation](http://symfony.com/doc/current/book/routing.html) (symfony.com)
- [The Drupal Story: Request In, Response Out](https://x-team.com/blog/drupal-8-request-in-response-out/) (x-team.com)

Was this helpful?

Yes

No

Any additional feedback?

Previous
[Concept: What Are Modules?](/tutorial/concept-what-are-modules?p=3234)

Next
[Concept: Finding Drupal Documentation](/tutorial/concept-finding-drupal-documentation?p=3234)

Clear History

Ask Drupalize.Me AI

close