---
title: "JSON:API POST Requests: Create an Entity"
url: "https://drupalize.me/tutorial/jsonapi-post-requests-create-entity?p=3279"
guide: "[[decoupled-headless-drupal]]"
order: 26
---

# JSON:API POST Requests: Create an Entity

## Content

Often, web services require the user to create content. Votes on content, ratings, comments, and user-submitted stories are good examples of this. The JSON:API module supports the creation of entities by sending data in POST requests.

In this tutorial we will:

- Add an appropriate set of HTTP headers to a request that generates a new entity
- Construct a JSON object for the entity we want to create
- Issue a POST request that creates a new article node in Drupal

By the end of this tutorial you should be able to create a POST request that creates a new entity of any type via the JSON:API.

## Goal

Create a new article in the Drupal backend via a JSON:API POST request.

## Prerequisites

- [Make an Authenticated Request Using OAuth 2](https://drupalize.me/tutorial/make-authenticated-request-using-oauth-2)
- [Install JSON:API Module](https://drupalize.me/tutorial/install-jsonapi-module)
- [JSON:API Resource Requests](https://drupalize.me/tutorial/jsonapi-resource-requests)

## Create an article

Imagine that our decoupled application supports user-submitted content. In order to support that feature we need the following pieces:

- A form that allows the user to input the data that needs to be saved
- An authentication mechanism that ensures that the content was submitted by that particular user
- An HTTP request from the consumer to the Drupal back-end. That request should contain the data to be saved and the authentication token. Since we are creating a new entity, we will need to do this in a `POST` request.

In this tutorial we will not cover the creation of the form in the consumer's technology. However, upon submission that form should send a request like the one below.

### Gather the authentication token

Our consumer application should have a way to safely store the authentication token for the logged-in user. There are multiple ways to do this, including the one described in [Get a Token for OAuth 2 Requests](https://drupalize.me/tutorial/get-token-oauth-2-requests).

In this example we will assume that our token is: `eyJ0eXAi...dQOQw`

### Prepare the request headers

We will need to set the following request headers:

- `Content-Type: application/vnd.api+json`. This header will tell Drupal that the body that the request contains is structured in JSON:API format.
- `Accept: application/vnd.api+json`. This will instruct the server to return any responses back to our consumer using JSON:API format.
- `Authentication: Bearer eyJ0eXAi...dQOQw`. This one contains the authentication token obtained above. This is the proof the server needs to trust that the request was originated from a valid Drupal user through OAuth 2.

### Prepare the request body

We will send the data to the Drupal server in the body of the request. The best way to do this is to first [GET an article from the API](https://drupalize.me/tutorial/jsonapi-resource-requests) so that you can see the required structure, and then adapt it for the body of the POST request. Whenever we do that, we will also have to remove the properties that are read-only (like `nid`) or generated by the server (like `created`).

The body of the request used to create an article could look like this:

```
{
	"data": {
  	"attributes": {
    	"title": "A new article"
  	},
  	"type": "node--article"
	}
}
```

And a more complex example like this:

```
{
  "data": {
    "type": "node--article",
    "attributes": {
      "langcode": "en",
      "title": "This was created from the API!",
      "status": "1",
      "promote": "1",
      "sticky": "0",
      "body": {
        "value": "We created this article by POSTing content via the API. Exciting times!",
        "format": "plain_text",
        "summary": "Custom summary"
      }
    },
    "relationships": {
      "type": {
        "data": {
          "type": "node_type--node_type",
          "id": "article"
        }
      },
      "uid": {
        "data": {
          "type": "user--user",
          "id": "10ce2b4a-8962-4ca8-9ff0-7a85f69cd414"
        }
      },
      "field_tags": {
        "data": [
          {
            "type": "taxonomy_term--tags",
            "id": "7ba55145-1438-46b3-adae-ee4b3033d932"
          },
          {
            "type": "taxonomy_term--tags",
            "id": "d951f621-146f-4ad1-9951-1b0ba685202c"
          },
          {
            "type": "taxonomy_term--tags",
            "id": "d4be4b93-c607-41fd-af8e-4a387abef6ed"
          }
        ]
      }
    }
  }
}
```

It is important to note that the body of a POST request cannot contain an `id` key or an `nid` attribute. The Drupal back-end will generate those upon creation.

Fields like `promoted`, `status`, `sticky`, the node author, etc. will get the expected default values if they are left empty. It is considered a good practice to include them in the POST request whenever possible. Otherwise the front-end application's behavior is subject to change whenever the default values change in the back-end.

### Send the request

Requests to create an entity should be sent to the collection endpoint for the type of entity being created. Articles, for example, can be created at `https://example.com/jsonapi/node/article`

Send the request using your favorite HTTP client. Voila! The article has been created.

The response will look like:

```
{
    "data": {
        "type": "node--article",
        "id": "dc6c164c-7b08-4a3c-ac82-845628ff2eb7",
        "attributes": {
            "nid": 254,
            "uuid": "dc6c164c-7b08-4a3c-ac82-845628ff2eb7",
            "vid": 255,
            "langcode": "en",
            "revision_timestamp": 1510208815,
            "revision_log": null,
            "status": true,
            "title": "This was created from the API!",
            "created": 1510208815,
            "changed": 1510208815,
            "promote": true,
            "sticky": false,
            "default_langcode": true,
            "revision_translation_affected": true,
            "path": {
                "alias": null,
                "pid": null,
                "langcode": "en"
            },
            "body": {
                "value": "We created this article by POSTing content via the API. Exciting times!",
                "format": "plain_text",
                "summary": "Custom summary"
            },
            "comment": {
                "status": 2,
                "cid": 0,
                "last_comment_timestamp": 0,
                "last_comment_name": null,
                "last_comment_uid": 0,
                "comment_count": 0
            }
        },
        "relationships": {
            "type": {
                "data": {
                    "type": "node_type--node_type",
                    "id": "30b333ef-a325-4cbb-b39b-3e524c4ef1c7"
                },
                "links": {
                    "self": "http://127.0.0.1:8888/jsonapi/node/article/dc6c164c-7b08-4a3c-ac82-845628ff2eb7/relationships/type",
                    "related": "http://127.0.0.1:8888/jsonapi/node/article/dc6c164c-7b08-4a3c-ac82-845628ff2eb7/type"
                }
            },
            "revision_uid": {
                "data": {
                    "type": "user--user",
                    "id": "10ce2b4a-8962-4ca8-9ff0-7a85f69cd414"
                },
                "links": {
                    "self": "http://127.0.0.1:8888/jsonapi/node/article/dc6c164c-7b08-4a3c-ac82-845628ff2eb7/relationships/revision_uid",
                    "related": "http://127.0.0.1:8888/jsonapi/node/article/dc6c164c-7b08-4a3c-ac82-845628ff2eb7/revision_uid"
                }
            },
            "uid": {
                "data": {
                    "type": "user--user",
                    "id": "10ce2b4a-8962-4ca8-9ff0-7a85f69cd414"
                },
                "links": {
                    "self": "http://127.0.0.1:8888/jsonapi/node/article/dc6c164c-7b08-4a3c-ac82-845628ff2eb7/relationships/uid",
                    "related": "http://127.0.0.1:8888/jsonapi/node/article/dc6c164c-7b08-4a3c-ac82-845628ff2eb7/uid"
                }
            },
            "field_image": {
                "data": null
            },
            "field_tags": {
                "data": [
                    {
                        "type": "taxonomy_term--tags",
                        "id": "7ba55145-1438-46b3-adae-ee4b3033d932"
                    },
                    {
                        "type": "taxonomy_term--tags",
                        "id": "d951f621-146f-4ad1-9951-1b0ba685202c"
                    }
                ],
                "links": {
                    "self": "http://127.0.0.1:8888/jsonapi/node/article/dc6c164c-7b08-4a3c-ac82-845628ff2eb7/relationships/field_tags",
                    "related": "http://127.0.0.1:8888/jsonapi/node/article/dc6c164c-7b08-4a3c-ac82-845628ff2eb7/field_tags"
                }
            }
        },
        "links": {
            "self": "http://127.0.0.1:8888/jsonapi/node/article/dc6c164c-7b08-4a3c-ac82-845628ff2eb7"
        }
    },
    "links": {
        "self": "http://127.0.0.1:8888/jsonapi/node/article"
    }
}
```

In the response we can find all the properties we set from the body, and others that the server sets for us automatically. Or an error: [learn more about handling errors](https://drupalize.me/tutorial/jsonapi-error-handling).

We need to pay careful attention to relationships. They need to use UUIDs as references, and not the entity IDs. In our example above we sent 3 tag relationships, but the response only contains 2 of them. That is because—for the sake of the example—the third UUID was incorrect, and therefore not set.

## Recap

In this tutorial we created an article using our HTTP API. To create the article we constructed the headers and the body payload according to JSON:API's expectations. We didn't use Drupal's administration interface for any of that. In fact, this method to create content is especially interesting when it's the end user who creates the content to be stored.

## Further your understanding

- Try to POST an article, but provide the wrong OAuth2 token. What happens?
- What happens if you POST an article with an `nid` in the attributes of the body?
- Explore the [OpenAPI](https://www.drupal.org/project/openapi) module. It aims to provide automatically-generated documentation of the fields that you can POST to create each content type.
- Getting all the UUIDs for your tags will require a bunch of GET requests prior to our POST request. That can be tedious and have low performance. Learn how to [mitigate that using the Subrequests module](https://www.lullabot.com/articles/incredible-decoupled-performance-with-subrequests).

## Additional resources

If you've [setup the Schemata module for documentation](https://drupalize.me/tutorial/automatic-documentation-schemata) you can use the information in these links to find the appropriate endpoint to submit your requests to, as well as an example of the structure of the entity object that you can copy/paste as a starting point.

- [Creating new resources (POST)](https://www.drupal.org/docs/core-modules-and-themes/core-modules/jsonapi-module/creating-new-resources-post) (Drupal.org)
- [Working with files (POST)](https://www.drupal.org/docs/core-modules-and-themes/core-modules/jsonapi-module/file-uploads) (Drupal.org)
- Change record: [JSON:API now supports version negotiation on all versionable entity types](https://www.drupal.org/node/3262453) (Drupal.org)

Was this helpful?

Yes

No

Any additional feedback?

Previous
[Access an API from the Browser with Cross-Origin Resource Sharing](/tutorial/access-api-browser-cross-origin-resource-sharing?p=3279)

Next
[JSON:API PATCH Requests: Update an Entity](/tutorial/jsonapi-patch-requests-update-entity?p=3279)

Clear History

Ask Drupalize.Me AI

close